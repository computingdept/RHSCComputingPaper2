<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Floating Point Normalisation - Two Challenges</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding-bottom: 50px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
    }
    button {
      margin-top: 10px;
      padding: 10px;
      font-size: 1em;
      cursor: pointer;
    }
    h2 {
      margin-top: 40px;
      border-top: 2px solid #999;
      padding-top: 20px;
    }
    /* Dark green style for dropcase letters with no gap */
    .dropcase {
      color: darkgreen;
      font-size: 1.3em;
      font-weight: bold;
      display: inline-block;
      line-height: 1;
      margin-right: 0;
    }
  </style>
  <script>
    /* 
       CHALLENGE 1 
       5-bit mantissa: 00011
       4-bit exponent: 0010
       Expected answers:
         Step 1 (W): Mantissa=00011, Exponent=0010
         Step 2 (I): Denary value=12  (since 3×2^2=12)
         Step 3 (N): Normalised Mantissa=01100, Normalised Exponent=0000
    */
    function checkAnswersChallenge1() {
      // Hard-coded correct answers for Challenge 1
      const c1_expected = {
        step1_mantissa: "00011",
        step1_exponent: "0010",
        step2_value: "12",
        step3_mantissa: "01100",
        step3_exponent: "0000"
      };

      // Get the user inputs
      const c1_s1m = document.getElementById("c1_step1_mantissa");
      const c1_s1e = document.getElementById("c1_step1_exponent");
      const c1_s2v = document.getElementById("c1_step2_value");
      const c1_s3m = document.getElementById("c1_step3_mantissa");
      const c1_s3e = document.getElementById("c1_step3_exponent");

      // Helper function to check an individual field
      function checkField(inputElem, correctVal) {
        const userVal = inputElem.value.trim();
        inputElem.style.backgroundColor =
          (userVal === correctVal) ? "lightgreen" : "lightcoral";
      }

      // Compare user inputs to expected values
      checkField(c1_s1m, c1_expected.step1_mantissa);
      checkField(c1_s1e, c1_expected.step1_exponent);
      checkField(c1_s2v, c1_expected.step2_value);
      checkField(c1_s3m, c1_expected.step3_mantissa);
      checkField(c1_s3e, c1_expected.step3_exponent);
    }

    /* 
       CHALLENGE 2 
       5-bit mantissa: 11100
       4-bit exponent: 0110
       If you know the final correct answers, replace the "?" placeholders below.
       Otherwise, the script won't highlight correct/incorrect for Challenge 2.
    */
    function checkAnswersChallenge2() {
      // Currently placeholders for Challenge 2
      // Replace them if you already know the correct final values
      const c2_expected = {
        step1_mantissa: "11100",
        step1_exponent: "0110",
        step2_value: "?",
        step3_mantissa: "?",
        step3_exponent: "?"
      };

      // Get the user inputs
      const c2_s1m = document.getElementById("c2_step1_mantissa");
      const c2_s1e = document.getElementById("c2_step1_exponent");
      const c2_s2v = document.getElementById("c2_step2_value");
      const c2_s3m = document.getElementById("c2_step3_mantissa");
      const c2_s3e = document.getElementById("c2_step3_exponent");

      // Helper function to check an individual field
      function checkField(inputElem, correctVal) {
        const userVal = inputElem.value.trim();
        // If correctVal is "?" we won't highlight
        if (correctVal === "?") {
          inputElem.style.backgroundColor = "";
        } else {
          inputElem.style.backgroundColor =
            (userVal === correctVal) ? "lightgreen" : "lightcoral";
        }
      }

      // Compare user inputs to expected values
      checkField(c2_s1m, c2_expected.step1_mantissa);
      checkField(c2_s1e, c2_expected.step1_exponent);
      checkField(c2_s2v, c2_expected.step2_value);
      checkField(c2_s3m, c2_expected.step3_mantissa);
      checkField(c2_s3e, c2_expected.step3_exponent);
    }
  </script>
</head>
<body>
  <h1>Floating Point Normalisation - Two Challenges</h1>

  <!-- CHALLENGE 1 -->
  <h2>Challenge 1</h2>
  <p>
    Mantissa (5 bits) = <strong>00011</strong>, Exponent (4 bits) = <strong>0010</strong><br>
    Refer to the number line for two’s complement when interpreting both the mantissa and exponent.  
    Then normalise the result, showing your working.
  </p>
  <table>
    <tr>
      <td>
        <span class="dropcase">W</span>rite down original:
      </td>
      <td>
        Mantissa (5-bit):
        <input type="text" id="c1_step1_mantissa" size="6">
      </td>
      <td>
        Exponent (4-bit):
        <input type="text" id="c1_step1_exponent" size="6">
      </td>
    </tr>
    <tr>
      <td>
        <span class="dropcase">I</span>dentify the denary value<br>
        (Calculation: 3 × 2<sup>2</sup>)
      </td>
      <td colspan="2">
        Denary value:
        <input type="text" id="c1_step2_value" size="6">
      </td>
    </tr>
    <tr>
      <td>
        <span class="dropcase">N</span>ormalise<br>
        (Should start with "01" if positive)
      </td>
      <td>
        Normalised Mantissa (5-bit):
        <input type="text" id="c1_step3_mantissa" size="6">
      </td>
      <td>
        Normalised Exponent (4-bit):
        <input type="text" id="c1_step3_exponent" size="6">
      </td>
    </tr>
  </table>
  <button onclick="checkAnswersChallenge1()">Check Answers (Challenge 1)</button>

  <!-- CHALLENGE 2 -->
  <h2>Challenge 2</h2>
  <p>
    Mantissa (5 bits) = <strong>11100</strong>, Exponent (4 bits) = <strong>0110</strong><br>
    Refer to the number line for two’s complement when interpreting both the mantissa and exponent.  
    Then normalise the result, showing your working.
  </p>
  <table>
    <tr>
      <td>
        <span class="dropcase">W</span>rite down original:
      </td>
      <td>
        Mantissa (5-bit):
        <input type="text" id="c2_step1_mantissa" size="6">
      </td>
      <td>
        Exponent (4-bit):
        <input type="text" id="c2_step1_exponent" size="6">
      </td>
    </tr>
    <tr>
      <td>
        <span class="dropcase">I</span>dentify the denary value<br>
        (Calculation: ???)
      </td>
      <td colspan="2">
        Denary value:
        <input type="text" id="c2_step2_value" size="6">
      </td>
    </tr>
    <tr>
      <td>
        <span class="dropcase">N</span>ormalise<br>
        (Should start with "0" if positive, or "1" if negative, etc.)
      </td>
      <td>
        Normalised Mantissa (5-bit):
        <input type="text" id="c2_step3_mantissa" size="6">
      </td>
      <td>
        Normalised Exponent (4-bit):
        <input type="text" id="c2_step3_exponent" size="6">
      </td>
    </tr>
  </table>
  <button onclick="checkAnswersChallenge2()">Check Answers (Challenge 2)</button>

</body>
</html>
