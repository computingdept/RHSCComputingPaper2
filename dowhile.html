<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>3 Factorial Trace Table Challenge</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding-bottom: 50px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    pre {
      background: #eee;
      padding: 10px;
      font-size: 1.1em;
      overflow-x: auto;
    }
    button {
      margin-top: 10px;
      padding: 10px;
      font-size: 1em;
      cursor: pointer;
    }
  </style>
  <script>
    function checkAnswersFactorial() {
      // Each row is: [Line Number, i, factorial, Output]
      // Only steps where a value changes or output is produced are included.
      let correctValues = [
        // Line 02: factorial is set to 1.
        ["02", "", "1", ""],
        // Line 03: i is set to 1.
        ["03", "1", "", ""],
        // First iteration, Line 06: i is incremented from 1 to 2.
        ["06", "2", "", ""],
        // Second iteration, Line 05: factorial becomes 1 * 2 = 2.
        ["05", "", "2", ""],
        // Second iteration, Line 06: i is incremented from 2 to 3.
        ["06", "3", "", ""],
        // Third iteration, Line 05: factorial becomes 2 * 3 = 6.
        ["05", "", "6", ""],
        // Third iteration, Line 06: i is incremented from 3 to 4.
        ["06", "4", "", ""],
        // Line 08: Output is printed ("Factorial is 6").
        ["08", "", "6", "Factorial is 6"]
      ];
      
      let table = document.getElementById("traceTableFactorial");
      let rows = table.rows;
      
      // Skip the header row (index 0) and check each data row.
      for (let i = 1; i < rows.length; i++) {
         let inputs = rows[i].getElementsByTagName("input");
         let correct = correctValues[i - 1];
         for (let j = 0; j < inputs.length; j++) {
            inputs[j].style.backgroundColor =
              (inputs[j].value.trim() === correct[j]) ? "lightgreen" : "lightcoral";
         }
      }
    }
  </script>
</head>
<body>
  <h2>3 Factorial Trace Table Challenge</h2>
  <p>
    This program computes the factorial of 3. The variable <strong>n</strong> is set to 3 and remains constant (so it isnâ€™t shown).
    Record only the steps where a value changes or output is produced.
  </p>
  <pre>
01 n = 3
02 factorial = 1
03 i = 1
04 while (i <= n)
05     factorial = factorial * i
06     i = i + 1
07 endwhile
08 print("Factorial is " + factorial)
  </pre>
  <p>
    Fill in the table below only when a value changes. For example, after line 02, record that factorial becomes 1; after line 03, record that i becomes 1; etc.
  </p>
  <table id="traceTableFactorial">
    <tr>
      <th>Line Number</th>
      <th>i</th>
      <th>factorial</th>
      <th>Output</th>
    </tr>
    <!-- Row 1: Line 02: factorial becomes 1 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 2: Line 03: i becomes 1 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 3: First iteration, Line 06: i becomes 2 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 4: Second iteration, Line 05: factorial becomes 2 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 5: Second iteration, Line 06: i becomes 3 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 6: Third iteration, Line 05: factorial becomes 6 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 7: Third iteration, Line 06: i becomes 4 -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
    <!-- Row 8: Line 08: Output "Factorial is 6" -->
    <tr>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
      <td><input type="text"></td>
    </tr>
  </table>
  <button onclick="checkAnswersFactorial()">Check Answers</button>
</body>
</html>
